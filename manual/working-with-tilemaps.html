<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Working With Tilemaps | Catch.io Dev Doc </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Working With Tilemaps | Catch.io Dev Doc ">
    <meta name="generator" content="docfx 2.56.6.0">
    <meta name="description" content="Developer documentation for Team STEP: Project Catch.io">
    <link rel="shortcut icon" href="../resources/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="working-with-tilemaps">Working With Tilemaps</h1>

<p>The level design will play a huge role in making this game enjoyable for the players, as most of the core mechanics in this project relies on the environmental elements that the player should be aware of.
To streamline the development process and allow the level designers to focus on designing, we will separate the level designing tool from the engine.</p>
<p>In this section, we will discuss the tools and the set of rules that we will use in order to make this happen.</p>
<h2 id="tilemap-frameworks">Tilemap Frameworks</h2>
<p>There are a couple of options you can choose when creating a tile-based 2D game in Unity.
All frameworks have their strengths and weaknesses that the developers should consider and commit to that framework to allow the core mechanics to have a consistent performance.</p>
<h3 id="unity-2d-tilemap">Unity 2D Tilemap</h3>
<p><img src="../resources/unity-tilemap-demo.gif" alt="unity tilemap demo"></p>
<p>Unity 2D Tilemap is a tilemap component that Unity offers within their engine.
Because it is part of the engine, this framework is highly compatible with most components and other tools within the Unity ecosystem.
Plus, it is very flexible when it comes to adding custom features.
You can learn more about extending the Unity 2D Tilemap framework from <a href="https://github.com/Unity-Technologies/2d-techdemos">this GitHub repository</a>.</p>
<p>Despite the strong support that Unity 2D Tilemap receives from both Unity and the community (hey, that rhymed!), there are limitations that the developer should consider before fully committing to it.
One such limitation is with the in-engine editor, as it lacks a lot of tile selection tools and built-in brushes.
Another limitation is how complicated the custom brush implementation is alongside the difficulty of extending the existing tilemap framework itself.</p>
<p>Pros:</p>
<ul>
<li>Highly compatible with the base engine and other assets</li>
<li>Ability to create custom brushes and tile logics</li>
<li>Easy composite collider</li>
<li>Great documentation</li>
<li>Great support from the community</li>
<li>Completely free</li>
</ul>
<p>Cons:</p>
<ul>
<li>Difficult to extend the core tilemap component</li>
<li>Difficult to create usable custom brushes</li>
<li>All tiles are saved as a separate prefab in the project (hard to migrate)</li>
<li>Lack of effective custom tile property injection</li>
</ul>
<p>Helpful resources:</p>
<ul>
<li><a href="https://docs.unity3d.com/Manual/class-Tilemap.html">Unity tilemap manual</a></li>
<li><a href="https://learn.unity.com/tutorial/introduction-to-tilemaps">Tilemap component tutorial</a></li>
</ul>
<h3 id="super-tilemap-editor">Super Tilemap Editor</h3>
<p><img src="../resources/super-tilemap-editor-demo.gif" alt="super tilemap editor demo"></p>
<p>Super Tilemap Editor is a 3rd-party Unity asset that can be bought from the <a href="https://assetstore.unity.com/packages/tools/level-design/super-tilemap-editor-56339">Unity Asset Store</a> for $45.
This asset (or plug-in) allows you to create and use 2D tilemap in your game scene.
The tile system is based on the position within the specified atlas image, whereas Unity will create a prefab for each individual tiles from a sprite image.
Overall, Super Tilemap Editor is a robust package that offers easy in-engine map editing tools.
Thanks to the fact that the source code is available to the developer, you can extend and change the plugin from its core.</p>
<p>However, Super Tilemap Editor has trouble with importing TMX (Tiled Map Editor XML) files despite it claims to provide full support for it.
In addition to that, Super Tilemap Editor lacks in proper documentation or community support compared to that of Unity Tilemap.</p>
<p>Pros:</p>
<ul>
<li>Highly expandable</li>
<li>Optimized tiling system</li>
<li>Robust editing tools</li>
<li>Supports tile metadata and custom properties</li>
<li>Easy to use</li>
<li>Can export tilemaps as prefabs</li>
</ul>
<p>Cons:</p>
<ul>
<li>Not free</li>
<li>Lacks in documentation</li>
<li>Community size is small compared to Unity Tilemap</li>
<li>Issue with importing from TMX files</li>
</ul>
<p>Helpful Resources:</p>
<ul>
<li><a href="https://forum.unity.com/threads/released-super-tilemap-editor.387330/">Unity forums release thread</a></li>
<li><a href="https://creativespore.com/super-tilemap-editor/">Super Tilemap Editor Official Page</a></li>
<li><a href="https://drive.google.com/file/d/0BxuhRM8zIOm8a3NlZHVqMGNVZWM/view">Super Tilemap Editor Documentation</a></li>
</ul>
<h2 id="tiled-tilemap-editor">Tiled Tilemap Editor</h2>
<p>There are many options when it comes to implementing 2D tilemap systems in Unity.
To keep the project development flow clean, we will use a map editing tool called Tiled.
You can download it <a href="https://www.mapeditor.org/">from this link</a>.</p>
<p>Tiled is a map editing tool that reads and saves the map information to a file called <code>.tmx</code> which is a form of XML.
Tiled comes with various powerful tools and features that makes 2D map designing easy.
You can add custom properties to petty much everything starting from the map down to the individual tiles.
Thanks to this feature, it is possible to create a concept map that contains features which are not yet implemented in the game.</p>
<p>To learn more about what this tool can do, please refer to the <a href="https://doc.mapeditor.org/en/stable/manual/introduction/">Tiled official documentation</a>.</p>
<h3 id="starting-a-project">Starting a Project</h3>
<p>The Tiled project will be part of Catch.io&#39;s source code under the folder name <code>TiledMapEditor</code>.
The location of this folder may change depending on how we decide to import the map data to Unity, but as of this writing, the folder will be in the root directory of the project.</p>
<p>To open the project map editor, you will have to load the <code>CatchIoLevels.tiled-project</code> file to Tiled.
This file contains the reference to the editor extension location, object type data, auto mapping rules and other information that is required for map designing.
Keeping a project file as a single source of reference for all the Tiled files allows us to keep a consistent working environment across different designers.
After when you opened a project, all you have to do is double-click the TMX file to open up a map (or create a new one) and make the changes you want.</p>
<h3 id="tiled-project-folder-structure">Tiled Project Folder Structure</h3>
<p>For our project, we will have the following folder structure:</p>
<ul>
<li>Extensions: Contains the Tiled editor extension scripts that can be used by the designer. This folder is a clone of the official extension <a href="https://github.com/mapeditor/tiled-extensions">repository</a>. You can create new extensions and just add it in this folder. The editor will automatically parse through the content.</li>
<li>Maps: Contains the TMX tilemap file that the designer will directly work on, plus the auto mapping rules entry point. All game levels designed in Tiled should be saved in this folder.<ul>
<li>Rules: A subdirectory of <code>Maps</code>. This folder contains the auto mapping rule maps that will be used in this project. All TMX files used here must be referenced in the <code>rules.txt</code> file in the <code>Maps</code> folder if you want the editor to read them.</li>
</ul>
</li>
<li>Templates: Contains the map object template file. Objects are useful when you want to reference a Unity prefab or other complicated game-specific logic that is difficult to add using Tiled. When you create an object that is used in other maps, please create a template of it and save it in this folder.</li>
<li>Tileset: Contains the tileset information that is used in the map. The tileset source image will always be inside the <code>Assets/Textures/Tileset</code> or <code>Assets/Textures/Props</code> folder. This means that all the tilemap used in Tiled is based on the raw sprites that is read by the game engine. Tilesets should match the sprite name that it is based on to reduce confusion.</li>
<li>Types: Contains the map object type data. Using types allows the object to have a consistent property which makes it easy for the Unity importer to handle them later on. All types are kept in a single <code>.xml</code> file, so every time you add a new type, you should overwrite the existing one. However, be careful not to change the file name as they are referenced by the <code>.tiled-project</code> file.</li>
</ul>
<h3 id="useful-features">Useful Features</h3>
<p>There are a lot of tools and features that you can use in Tiled.
Trying to go through all of them will be impractical.
Instead, we&#39;ll only cover some important features that will be used the most in our project.</p>
<h4 id="overview">Overview</h4>
<p><img src="../resources/tilemap-editor-screen.png" alt="tilemap editor"></p>
<p>When you open a TMX file from a Tiled project, you&#39;ll be greeted with a tilemap editor screen.
This is the place where you will design the game map by placing tiles and objects that will be loaded on to a Unity scene.</p>
<ol>
<li><p>Project explorer</p>
<p> All major files that are inside the Tiled project will be shown here.
 You can load a tilemap or a tileset by double-clicking the file from here.
 Having said this, Tiled will try to list <em>all</em> files that are within the project directory, meaning that not all files listed in the explorer can be read by the editor (ex, JavaScript files).
 Also note that the built-in file explorer is not too responsive, so when you make changes to the files, you may need to manual refresh the view by right-clicking on the section and press refresh.
 Additionally, you cannot delete files directly from the editor.
 You will need to open the project folder and delete it from there.</p>
</li>
<li><p>Editing Tools</p>
<p> The top section contains the various brushes and operations you can do on a tile or an object, like stamps, terrain brushes, Wang brushes, selection, eraser, and more.
 Some extensions can add additional functions to this section, making it handy to the designer.</p>
</li>
<li><p>Property Section</p>
<p> You can add or change the property of your map from here.
 These include built-in properties (settings) such as layer format and the tile size.
 Custom properties can be viewed from the lower-half section under the &#39;Custom Properties&#39; header.
 You can add them by clicking on the blue plus button.</p>
</li>
<li><p>Template Editor</p>
<p> Templates are map objects that is referenced from a separate file.
 Although it&#39;s not displayed on the above example, when you select a custom object on the map that is saved as a template, or click on a <code>.tx</code> template file from the explorer, you can edit it from here.
 Changes made to the template will be applied to all the maps that uses it.</p>
</li>
<li><p>Script Console</p>
<p> Not to be confused with the <a href="https://doc.mapeditor.org/en/stable/manual/using-commands/">command feature</a>, which is a predefined bash script, the script console is primarily used for the Tiled scripting extensions, currently implemented for JavaScript and Python.
 This is more of a debugging tool to see if your project environment has been properly loaded, or to execute scripts directly from the project.</p>
<p> <img src="../resources/tiled-script-console.jpg" alt="script sample"></p>
</li>
<li><p>Map Layers</p>
<p> You can add and change and organize the tile layer from here.
 There aren&#39;t much to talk about layers other than that you can create tile layers, object layers, and image layers.
 Plus, you can also group multiple layers into a single folder to organize them.
 Layer name and their content will become important when you want to work with the auto mapping feature.
 Other than that, layers work exactly the way how you would expect it to work on most editing tools.</p>
</li>
<li><p>Tileset/Terrain Selection</p>
<p> You can choose which tile you want to place by selecting it from here.
 If you select a tile with the stamp brush, that will place the tile selection directly to the map.
 You can choose your terrain type or the Wang tilesets from their respective tabs which is located at the bottom.</p>
</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/TeamSTEP/Catch.io/blob/development/v0.0.1a/Documentation/manual/working-with-tilemaps.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            ©Team STEP, All Rights Reserved.
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
